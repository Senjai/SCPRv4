<% 
  if !defined?(full) 
    full = params[:id].present?
  end
%>

<div class="entry content-block">
  <div class="row-fluid">
    <%= widget "article_meta", entry %>

    <div class="span18 mq-solo-span">
      <article>
        <header>
          <h1 class="story-headline"><%= link_to entry.headline, entry.link_path %></h1>
          <div class="categories">
            <%= entry.blog_categories.map { |c|
              link_to(c.title, blog_category_path(entry.blog.slug, c.slug))
            }.join(" | ").html_safe %>
          </div>
          
          <p class="byline">
            <%= render_byline entry %>
          </p>
        </header>
    
        <div class="story-body">
          <div class="visible-reader"><%= widget "primary_audio", entry %></div>
          
          <%= render_asset entry, "blog" %>
          <%= render_content_body(entry, full ? :body : :extended_teaser) %>
        </div>
    
        <footer>
          <i><%= render_contributing_byline entry %></i>
          <div class="visible-reader"><%= widget "extra_audio", entry %></div>
          
          <% if entry.tags.present? %>
            <br /><i>Tagged:</i> <%= raw entry.tags.collect {|t| link_to(t.name, blog_entries_tagged_path(@blog.slug,t.slug)) }.join(", ") %>
          <% end %>
        </footer>
      </article>
      <%= widget("social_tools", entry, cssClass: "horizontal bottom") if full %>
    </div> <!-- span18 -->
  </div> <!-- row fluid -->
</div> <!-- entry -->
