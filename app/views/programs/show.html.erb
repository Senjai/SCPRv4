<% page_title @program.title %>

<% if @program.display_episodes %>
	<%= render :partial => "current_episode", :object => @program.episodes.published.first if @program.episodes.published.present? %>

	<% if upcoming = @program.episodes.upcoming.first %>
		<div class="upcoming-episode">
			<h3><b>Coming Up:</b> <%= upcoming.title %></h3>
			<p><%= upcoming.teaser %></p>
		</div>
	<% end %>	
<% end %>

<% if @program.display_segments %>
	<% nav = will_paginate @segments, previous_label: "&laquo; Newer".html_safe, next_label: "Older &raquo;".html_safe %>
	<section class="show-segments">
		<h2>Recently on <%= @program.title %></h2>
		
		<% if @segments.current_page > 1 %>
			<%= nav %>
		<% end %>
		<%= any_to_list? @segments, title: "Segments" do %>
			<%= render :partial => "segment", :collection => @segments %>
		<% end %>
		
		<%= nav %>
	</section>
	
<% elsif @program.display_episodes %>	
	<% nav = will_paginate @episodes, previous_label: "&laquo; Newer".html_safe, next_label: "Older &raquo;".html_safe %>

	<section class="show-episodes">
		<h2>Recently on <%= @program.title %></h2>
		
		<% if @episodes.current_page > 1 %>
			<%= nav %>
		<% end %>
		
		<%= render :partial => "episode", :collection => @episodes %>

		<%= nav %>
	</section>	
<% end %>