<% page_title @program.title %>

<% if @program.display_episodes %>
	<%= render :partial => "current_episode", :object => @program.episodes.published.first if @program.episodes.published.present? %>

	<% if upcoming = @program.episodes.upcoming.first %>
		<div class="upcoming-episode">
			<h3><b>Coming Up:</b> <%= upcoming.title %></h3>
			<p><%= upcoming.teaser %></p>
		</div>
	<% end %>
<% end %>

<br/>
<hr/>

<% if @program.display_segments %>


	<% nav = will_paginate @segments, previous_label: "&laquo; Newer".html_safe, next_label: "Older &raquo;".html_safe %>
	<section class="show-segments">
		<%= any_to_list? @segments, title: "Segments" do %>
			<h2>Recently on <%= @program.title %></h2>		
			<%= nav if @segments.current_page > 1 %>
			<%= render :partial => "segment", :collection => @segments %>
			<%= nav %>
		<% end %>
	</section>
<% elsif @program.display_episodes %>
	
	<br/>
	<hr/>

	<% nav = will_paginate @episodes, previous_label: "&laquo; Newer".html_safe, next_label: "Older &raquo;".html_safe %>
	<section class="show-episodes">		
		<%= any_to_list? @episodes, title: "Episodes" do %>
			<h2>Recently on <%= @program.title %></h2>
			<%= nav if @episodes.current_page > 1 %>
			<%= render :partial => "episode", :collection => @episodes %>
			<%= nav %>
		<% end %>
	</section>	
<% end %>