<% page_title "History" %>

<% if @object %>
  <%= render 'header', page_title: @PAGE_TITLE, object: @object %>
<% end %>

<table class="table table-striped">
  <%= any_to_list? @versions, message: "This object has no logged history in the Rails CMS." do %>
    <thead>
      <tr>
        <th>Manage</th>
        <% @list.columns.each do |column| %>
          <th><%= column.header %></th>
        <% end %>
      </tr>
    </thead>
    <tbody class="list">
      <% @versions.each do |version| %>
        <tr class="versions">
          <td>
            <%= link_to "View", admin_version_path(resources: version.versioned.class.route_key, resource_id: version.versioned.id, version_number: version.version_number), class: "btn" %>
          </td>
          <% @list.columns.each do |column| %>
            <td>
              <%= render_attribute column, version, path: admin_version_path(version.versioned.class.name.tableize, version.versioned.id, version.version_number) %>
            </td>
          <% end %>
        </tr>
      <% end %>
    </tbody>
  <% end %>
</table>

<%= paginate @versions, theme: 'bootstrap', window: 4%>
