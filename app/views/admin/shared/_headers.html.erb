<% list.columns.each do |column| %>
  <% is_sorting = order_attribute == column.attribute.to_s %>

  <th class="<%= 'header-highlighted' if is_sorting %> column-<%=column.attribute%>">
    <% if column.sortable? %>
      <i class="icon <%=sort_mode_icon(is_sorting ? sort_mode || column.default_sort_mode : column.default_sort_mode)%>"></i>

      <%= link_to_if column.sortable?, column.header, request.parameters.merge(order: column.attribute, sort_mode: is_sorting ? switch_sort_mode(column, order_attribute, sort_mode) : column.default_sort_mode) %>

      <%= render('/admin/shared/cancel_link', href: model.admin_index_path) if is_sorting %>
    <% else %>
      <%= column.header %>
    <% end %>
  </th>
<% end %>
