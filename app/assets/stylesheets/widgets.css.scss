/* ********* WIDGET MIXINS ********** */
//sidebar styling mixin
@mixin sidebar-widget {
	border-bottom:1px solid $grayLighter;
	margin-bottom:$baseline / 2;
}
@mixin story-sidebar-widget {
	@include font-sans-serif(normal, 12px);
}

// Right Rail Sidebar
#sidebar {
	h6 {
		font-size:16px;
		line-height:$baseline;
	  	margin-bottom:$baseline/2;
	}
}

// Story Sidebar 
#story-sidebar {
	.widget {
		@include sidebar-widget();
	}
	hr {
		border-bottom:2px solid $grayLighter;
		margin-bottom:3px;
	}
}

// Story Audio Widget
.story-audio {
	background-color:$nearWhite;
	border-bottom:1px solid $grayLighter;
	border-top:1px solid $grayLighter;
	margin-bottom:$baseline;

	a.play-btn {
		background:transparent url(image_path('media-players/story-audio-play.png')) no-repeat top left;
		display:block;
		float:left;
		width:34px;
		height:34px;
		margin-right:10px;
		text-indent:-9999px;
		&:hover {
			background-position:0 -36px;
		}
	}
	
	&.inline {
		background: none;
		border: none;
		margin: none;
		display: inline;
	}
	
	a.inline {
		background: url(image_path('icons/tiny-listen.png')) no-repeat 2px 5px;
		display: inline-block;
		padding-left: 17px;
	}
	
	.audio-content {
		float:left;
		h4 {
			background:transparent url(image_path('icons/listen-headphones.png')) no-repeat left top;
			@include font-headline(600);
			font-size:15px;
			margin-bottom:12px;
			padding-left:36px;
			span {
				font-size:12px;
				font-weight:normal;
				@include ie-inline-block();
				margin-left:6px;
			}
		}
	}
	.duration {
		@include ie-inline-block();
		padding-top:6px;
	}
	p {
		@include font-sans-serif(normal, 11px, 15px);
		color: $gray;
	}
	ul.audio-tools {
		float:right;
		@include font-sans-serif(normal, 11px, 18px);
		margin: 6px 0 0 0;
		li {
			@include nav-horiz();
			a {
				color:$gray;
				line-height:24px;
				&:hover {
					color:$grayDark;
				}
			}
		}
	}
}
// Audio Bar
.audio-bar {
	&.bar-inactive {
		bottom:$baseline * -3.5;
	}
	&.bar-active {
		bottom:0;
	}
	background-color:#fff;
	height:$baseline * 3;
	position:fixed;
	z-index:1000;
	$nav-shadow: 0 -2px 9px -2px rgba(102,102,102,1), 0 -2px 9px -2px #666;
	@include box-shadow($nav-shadow);
	.jp-gui {
		border-right:1px solid $grayLighter;
		width:400px;
		float:left;
	}
	.jp-title {
		border-right:1px solid $grayLighter;
		width:648px;
		float:left;
		p {
			@include font-sans-serif(bold, 16px);
			padding:20px;
			span {
				@include ie-inline-block();
				margin-right:$baseline / 2;
				color:$orangeDark;
				font-size:12px;
				text-transform:uppercase;
			}
			
			i {
			    font-style: inherit;
			}
		}
	}
	.jp-controls {
		float:left;
		height:$baseline * 3;
		width:100px;
		margin:0;
		padding:0 6px;
		li {
			@include nav-horiz();
			padding:0 6px;
		}
	}
	.jp-play, .jp-pause, .jp-rw, .jp-ff, .jp-mute, .jp-unmute {
		background-image:url(image_path('audio-controls.png'));
		background-repeat:no-repeat;
		display:block;
		text-indent:-9999px;
	}
	.jp-rw, .jp-ff {
		width:18px;
		height:11px;
		margin-top:25px;
		opacity:0.6;
	}
	.jp-rw:hover, .jp-ff:hover, .jp-mute:hover, .jp-unmute:hover {
		opacity:1;
	}
	.jp-rw {
		background-position:-97px -17px;
	}
	.jp-ff {
		background-position:-125px -17px;
	}
	.jp-play, .jp-pause {
		margin-top:10px;
		width:42px;
		height:42px;
	}
	.jp-play {
		background-position:0 0;
	}
	.jp-play:hover {
		background-position:0 -45px;
	}
	.jp-pause {
		background-position: -48px 0;
		width:42px;
		height:42px;
	}
	.jp-pause:hover {
		background-position:-49px -45px;
	}
	.jp-mute, .jp-unmute {
		background-position: -147px -10px;
		margin-top:18px;
		opacity:0.6;
		width:25px;
		height:25px;
	}
	.jp-unmute {
		background-position: -174px -10px;
	}
	.jp-bar {
		width:200px;
		float:left;
		margin-right:7px;
	}
	.jp-progress {
		float:left;
		width:285px;
		.jp-current-time, .jp-duration {
			@include font-sans-serif(normal, 11px);
			color:$nearBlack;
			width:35px;
			float:left;
			margin-top:20px;
		}
		.jp-seek-bar {
			background-color:#e0e0e0;
			height:8px;
			margin-top:26px;
			@include border-radius(6px);
			@include box-shadow(inset 0 1px 0 rgba(0,0,0,.35));
			.jp-play-bar {
				@include background-image(linear-gradient(rgba(0,0,0,.35), #03b9f2 5%, darken(#03b9f2, 8%)));
				background-color:#03b9f2;
				width:50%;
				height:8px;
				@include border-radius(6px);
			}
		}
	}
	.bar-close {
		float:left;
		position:relative;
		width:60px;
		a {	
			color:#fff;
			@include font-sans-serif(normal, 11px);
			background:transparent url(image_path('audio-close.png')) no-repeat 19px 20px;
			display:block;
			font-size:9px;
			width:58px;
			height:58px;
			opacity:0.8;
			padding:42px 0 0 2px;
			position:absolute;
			left:0;
			top:0;
			vertical-align:bottom;
			&:hover {
				color:$gray;
				opacity:1.0;
				text-decoration:none;
			}
		}
	}
}


// Sharing Tools
.sharing-tools {
	@include story-sidebar-widget();
	margin-bottom:$baseline;
	&.bottom {
		border-bottom: none;
		margin: 0;
	}
	h5 {
		color:$orangeDark;
		display:block;
		float:left;
		@include font-sans-serif(bold, 11px, 20px);
		margin-right:14px;
		text-transform:uppercase;
	}
	ul li{
		@include nav-horiz();
		background:transparent no-repeat left top;
		font-size:11px;
		margin-right:8px;
		padding-left:20px;
		color:$nearBlack;
		a {
			color:$nearBlack;
		}
		&.facebook {
			background-image:url(image_path('icons/share-facebook.png'));
			background-position:1px 2px;
			
			&:hover {
				cursor: pointer;
				text-decoration: underline;
			}
		}
		&.twitter {
			background-image:url(image_path('icons/share-twitter.png'));
			
			&:hover {
				cursor: pointer;
				text-decoration: underline;
			}
		}
		&.plus {
			color:$nearBlack;
			padding-left:0;
			div {
				margin-right:4px !important;
			}
		}
		&.print {
			background-image:url(image_path('icons/share-print.png'));
			background-position:0 1px;
		}
		&.email {
			background-image:url(image_path('icons/share-email.png'));
			background-position:0 3px;
		}
	}
	&.side {
		h5 {
			float:right;
			margin-right:0;
		}
		ul li {
			background-position:right top;
			display:block;
			float:right;
			margin:4px 0;
			padding:0 26px;
			&.facebook {
				background-position:right 3px;
			}
			&.twitter {
				background-position:right 2px;
			}
			&.plus {
				display:none;
			}
			&.print {
				background-position:right 3px;
			}
			&.email {
				background-position:right 4px;
			}
		}
	}
	&.multimedia {
		ul {
			li.plus, a {
				color:$gray;
			}
			.print {
				display:none;
			}
		}
	}
}

//Author Info
.author-info {
	margin-bottom:$baseline;
	h6 {
		@include font-sans-serif();
		font-weight:bold;
		line-height:1em;
		margin-bottom:10px;
		text-transform:none;
		a {
			color:$grayDark;
		}
	}
	img {
		float:left;
		margin-bottom:10px;
		margin-right:10px;
	}
	p {
		@include font-sans-serif(normal, 11px, 14px);
		&.brief-bio {
		}
	}
	ul {margin:0;}
	li {
		@include nav-horiz();
		@include font-sans-serif(normal, 11px);
		padding-left:0;
		padding-right:20px;
	}
}
// About Blog Widget
.blog-about {
	border-bottom:1px solid $grayLighter;
	h6 {
		color:$orangeDark;
	}
	p, ul {
		@include font-sans-serif(normal, 12px, 16px);
		margin-bottom:0;
	}
	.divider {
		background-position:200px top;
		margin-bottom:$baseline;
	}
}

.connect {
	.title {
		display: block;
		@include font-heading($size: 12px, $weight: 600, $lineHeight: 14px);
		margin-bottom:5px;
		text-transform: uppercase;
	}
	a {
		@include font-sans-serif($weight: normal, $size: 12px);
		margin-bottom:2px;
		padding-left: 18px;
	}
	margin-bottom: 10px;
	border-right: 1px solid $grayLighter;
	min-height: 100px;
}

.about {
	min-height: 100px;
	color: $gray;
	@include font-sans-serif($size: 12px, $lineHeight: 16px);
}

a.with-icon {
	margin-left: 4px;
	padding-top: 2px; /* cheat to push the text down a little */
	display: block;
	line-height: 16px;
	background-repeat: no-repeat;
	background-position: left 3px;
	color: lighten($black, 40%);
	&.twitter {
		background-image: url(image_path("icons/tiny-twitter.png"));
	}
	&.facebook {
		background-image: url(image_path("icons/tiny-facebook.png"));
	}
	&.podcast {
		background-image: url(image_path("icons/tiny-podcast.png"));
	}
	&.rss {
		background-image: url(image_path("icons/tiny-rss.png"));
	}
	&.archive {
		@include font-sans-serif($size: 12px, $weight: bold);
		background-image: url(image_path("icons/archived.png"));
		padding-left: 21px;
	}
	&:hover {
		text-decoration: underline;
	}
}


// Blog/Program Host Widget
#sidebar .host, .host {
	border-top:1px solid $grayLighter;
	img {
		float:left;
		margin-right:18px;
	}
	h6.host-name {
		@include font-sans-serif();
		font-weight:bold;
		line-height:1em;
		margin-bottom:10px;
		text-transform:none;
		a {
			color:$grayDark;
		}
	}
	p, ul {
		@include font-sans-serif(normal, 12px, 16px);
	}
}

// Multimedia Article Sidebar
.story-media {
	padding-top:$baseline / 2;
	figure.video {
		a {
			display:block;
			position:relative;
			span.play {
				background:transparent url(image_path('icons/video-play-btn-sm.png')) no-repeat 0 0;
				width:44px;
				height:29px;
				opacity:0.7;
				position:absolute;
				bottom:12px;
				left:6px;
			}
			&:hover span.play {
				opacity:1;
			}
		}
		img {
			max-width:100%;
		}
	}
	h5 {
		color:$orangeDark;
		font-size:12px;
		line-height:$baseline / 2;
		padding:($baseline / 8) 0;
		text-transform:uppercase;	
	}
	h4 {
		line-height: 18px;
		font-weight: 500;
		font-size: 15px;
		a {
			color:$grayDark;
		}
	}
}

.next-prev {
	@include font-headline($weight: normal);
	font-size: 14px;
	padding-bottom: 5px;
	a { color: $black; }
	
	.left {
		text-align: left;
		.arrow {
			margin-right: 10px;
			float: left;
		}
	}
	
	.right {
		text-align: right;
		.arrow {
			margin-left: 10px;
			float: right;
		}
	}
}

// Newsletter widget
.newsletter-subscribe {
	padding: 5px;
	form {
		input.email {
			padding-left: 30px;
			background: url(image_path("icons/envelope-open.png")) no-repeat 5px 2px;
			height: 15px;
			@include font-sans-serif($size: 10px);
			display: inline-block;
		}
		
		input[type=submit] {
			@include font-shorthand($size: 10px, $weight: normal);
			display: inline-block;
			padding: 2px 7px 1px 7px;
			margin: 0 0 0 7px;
		}
	}
}

// Related Articles
.related-articles {
	h6 {
		color:$orangeDark;
		
	}
}
.bottom {
	// background-color:$nearWhite;
	border-top:2px solid $grayLight;
	border-bottom:1px solid $grayLighter;
	padding:($baseline / 2) 0;
}

// PIJ Query
.pij-query {
	h6 {
		background: url(image_path('icons/pij-query.png')) no-repeat 0 4px;
		color:$grayDark;
		padding-left:30px;
		line-height: $baseLineHeight;
		small {
			@include font-sans-serif(normal, 11px);
			text-transform:none;
		}
	}
}

// Recent Videos
.recent-videos {
	ul { 
		margin:0;
		li {
			@include clearfix();
			list-style-type:none;
			margin-bottom:$baseline;
			figcaption {
				p {
					margin-bottom:0;
					a {
						@include font-headline();
						color:$nearBlack;
						font-size:15px;
						font-weight:600;
					}
				}
				span {
					@include font-sans-serif(normal, 11px);
				}
			}
			figure {
				float:left;
				width:120px;
				height:67px;
				margin-right:$baseline / 2;
				overflow:hidden;	
				a {
					display:block;
					height:67px;
					position:relative;
					span.play {
						background:transparent url(image_path('icons/video-play-btn-sm-thumb.png')) no-repeat 0 0;
						width:22px;
						height:15px;
						opacity:0.7;
						position:absolute;
						bottom:6px;
						left:6px;
						text-indent:-9999px;
					}
					&:hover span.play {
						opacity:1;
					}
				}
			}
		}
	}
}

// In Case You Missed It Carousel
#missed-it {
	margin-left:30px;
	width:1111px;
	hr {
		border-color:$graydarkHR;
	}
	h3 {
		color:$orangeDark;
	}
}

// Content Carousel
.content-carousel { 
	@include responsiveImageAsset($thumbW);
	@include centeredAsset;
	.title {
		display: block;
		text-align: center;
		margin-bottom: 10px;
		a { 
			@include font-navigation($size: 14px);
			color: $nearBlack;
		}
	}
}
.content_carousel {
	border-top:1px solid $grayLight;
	.section-head { 
		border-bottom:1px solid $grayLight;
		margin-bottom:$baseline / 1;
		position:relative;
		h3 {
	        line-height:$baseline * 1.5;
		}
		nav {
			position:absolute;
			top:4px;
			right:0;
			z-index:2;
			a {
				background:transparent url(image_path('icons/carousel-btns.png')) no-repeat;
				display:block;
				float:left;
				margin:0 8px;
				text-indent: -9999px;
				width:22px;
				height:22px;
				&.prev {
					background-position:0 0;
					&:hover {
						background-position:-62px 0;
					}
				}
				&.prev.disabled {
					background-position:0 0;
				}
				&.next {
					background-position:-32px 0;
					&:hover {
						background-position:-94px 0;
					}
				}
				&.next.disabled {
					background-position:-32px 0;
				}
				&.disabled {
					opacity:0.5;
				}
			}
		}	
	}
}
ul.carousel {
	margin:0;
}
.carousel li {
	display:block;
	float:left;
	min-height:200px;
	margin:0 11px;
	text-align:center;
	width:160px;
	a { 
		color:$grayAlt;
		display:block;
	}
	img {
		width:140px;
		height:140px;
	}
	p {
		@include font-headline($weight:lighter);
		color:$grayAlt;
		font-size:1.05em;
		line-height:16px;
		margin:0 auto;
		width:140px;
	}
}

.carousel-page {
	margin:0 auto 8px auto;
	text-align:center;
	width:57px;
	a {
		background:transparent url(image_path('icons/carousel-btns.png')) no-repeat -41px -27px;
		display: block;
		float: left;
		margin:0 3px;
		opacity:0.5;
		width: 13px;
		height: 13px;
		text-indent: -9999px;
		&:hover {
			opacity:1;
		}
		&.selected {
			background-position:-19px -27px;
			&:hover {
				opacity:0.5;
			}
		}
	}
}
//Comment Count Widget
a.comment-count.inline {
	background: url(image_path('icons/tiny-quotes.png')) no-repeat 2px 2px;
	padding-left: 18px;
	border: none;
}
.comment-count {
	border-top:1px solid $grayLight;
	margin-bottom:$baseline;
	h4 {
		background-position: left top;
		background:url(image_path('icons/comment-count.png')) top right no-repeat;
		color:$grayDark;
		font-size:16px;
		font-weight:600;
		height:20px;
		line-height:1;
		margin-bottom:$baseline / 2;
		opacity:0.85;
		padding-right:28px;
	}
	a {
		@include font-sans-serif(normal, 11px);
		display:block;
		//padding-left:28px;
	}
	&.left-side {
		text-align:right;
		.inner-container {
			padding-right:0;
		}
		h4 {
			@include ie-inline-block();
		}
		&.right-align {
			h4 {
				@include ie-inline-block();
				background-position: right 0;
				padding-left: 0;
				padding-right: 28px;
			}
		}
	}
	&.right-side {
		text-align:left;
		.inner-container {
			padding-left:0;
		}
	}
}

.storybar .comment-count h4 {
	padding-right: 0;
	padding-left: 28px;
	background-position: top left;
}

// Comments styling
.comments {
	border-top:1px solid $grayLight;
	padding-top:$baseline /2;
	h3.head {
		background:url(image_path('icons/comment-count.png')) no-repeat 0 4px;
		padding-left:28px;
	}
	#dsq-content {
		h3 {
			border-bottom:1px solid $grayLighter;
			color:$orangeDark;
			font-size:1em;
		}
	}
	.dsq-comment-text, .dsq-comment-header {
		color:$nearBlack;
	}
}


/* ********* SIDEBAR STYLES ********** */

//sidebar widget
#sidebar .widget, #sidebar-bottom .widget, #sidebar-top .widget {
	@include sidebar-widget();
}

// Ad units
.ad {
	text-align:center;
	overflow: hidden;
	img, object, .dfp {
		max-width: 100% !important;
	}
	
	&:first-child {
		padding-top:0;
	}
	p {
		margin-bottom:0;
		small {@include font-sans-serif(normal, 9px, 0px);}
		a {color:#999;}
	}
	.dfp {
		margin:0 auto 10px;
	}
}
#sidebar .ad:first-child {
	border-top:0;
	padding-top:0;
}

// Newsletter Subscribe
.newsletter {
	padding-top:.2em;
	h6 {
		margin-bottom:$baseline/2;
	}
	p {
		color:$grayDark;
		@include font-sans-serif($size:12px, $weight: bold);
		line-height:16px;
		margin-bottom:$baseline / 2;
		width:240px;
	}
	a {
		text-transform:uppercase ;
	}
	form {
		margin-bottom:$baseline / 2;
	}
	input.email {
		background:url(image_path('icons/newsletter-subscribe.png')) no-repeat 4px 3px;
		padding-left:30px;
		&[placeholder] {
			color:#5f5f5f;
		}
	}
}

// Sidebar article listings
.widget ol {
	margin:0;
	padding:0;
	li {
		font-size:13px;
		list-style-type:none;
		padding:($baseline / 4) 0;
	}
}

// Most Popular
.nav-tabs {
	@include font-sans-serif();
}
.popular li {
	@include clearfix();
	display:block;
	list-style-image:url("more-headlines-li.png");
	margin-bottom:0;
	position:relative;
	a {
		display:block;
		padding:0 $baseline / 2 10px;
		position:relative;
		z-index:4;
		@include font-headline($weight:lighter);
		color:$grayAlt;
		font-size:15px;
		line-height: 18px;
	}
	.count {
		@include background-image(linear-gradient(#fff, $nearWhite));
		@include border-radius(4px);
		@include font-headline();
		border:1px solid $grayLighter;
		color:$grayDark;
		display:block;
		float:right;
		font-size:14px;
		font-weight:bold;
		position:relative;
		white-space:nowrap;
		width:42px;
		height:42px;
		z-index:3;
		span {
			position:absolute;
			left:0;
			top:4px;
			display:block;
			width:43px;
			text-align:center;
		}
	}
}

// Recent Posts
.recent-posts {
	li {
		list-style-image:url("more-headlines-li.png");
		margin-bottom:$baseline / 2;
		p {
			margin-bottom:0;
		}
		.date-posted {
			@include font-sans-serif(normal, 11px);
		}
		a {
			color:$grayAlt;
			@include font-headline(lighter);
			font-size:1.05em;
		}
	}
}

// Mobile App Promo
.promo-mobile {
	background:url(image_path('mobile/ad-bg.jpg')) no-repeat center 80%;
	height:190px;
	position:relative;
	padding-bottom: 15px;
	a {
		position:absolute;
		top:40px;
		left:120px;
	}
}
#iphone-app-promo {
	background-color:#2E2E2E;
	position:fixed;
	top:0;
	left:0;
	width:100%;
	height:80px;
	$promo-shadow: 0 2px 9px -2px rgba(102,102,102,1), 0 2px 9px -2px #666;
	@include box-shadow($promo-shadow);
}
#iphone-app-promo h3 {
	color:$grayLight;
	margin-top:10px;
	text-shadow:-1px -1px 0px $black;
}
#iphone-app-promo a {
	text-shadow:-1px -1px 0px $black;
}
#iphone-app-promo img {
	height:70px;
	margin-top:10px;
	padding-left:40px;
}
.ui-tabs { position: relative; padding: .2em; zoom: 1; } /* position: relative prevents IE scroll bug (element with position: relative inside container with overflow: auto appear as "fixed") */
.ui-tabs .ui-tabs-hide { display: none !important; }


// Facebook
.fb-like {
	max-width: 90px;
	overflow: hidden;
}

.fb-recommendations {
	width: 100%;
	max-width: 346px;
	overflow: hidden;
}

.fb-facepile {
	width: 100%;
	max-width: 300px;
	margin-left: 2px;
	overflow: hidden;
}

.widget.facebook {
	.fb-like-container {
		text-align: right;
	}
	
	.fb-facepile-container {
		iframe {
			width: 100% !important;
		}
	}

	p {
		@include font-heading($size:1.1em);
		background:url("facebook/facebook_icon.gif") no-repeat left top;
		color:$facebookBlue;
		height: 25px;
		line-height: 12px;
		margin-bottom: 5px;
		padding:0 0 0 30px;
		a {
			vertical-align: text-bottom;
			color:$facebookBlue;
		}
	}
}

