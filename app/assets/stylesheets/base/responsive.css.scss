@import "base/bootstrap/mixins";

$containerPadding: 25px;

// Device sizes
$mediaMax: $gridRowWidth + $containerPadding * 2; // The maximum we care about, after this it's just fixed-grid
$mediaMidLandscape: 1024px;
$mediaMidPortrait: 768px;
$mediaSmallLandscape: 480px;
$mediaSmallPortrait: 320px;

// RESPONSIVE CLASSES
// ------------------

// Hide from screenreaders and browsers
// Credit: HTML5 Boilerplate
.hidden {
  display: none;
  visibility: hidden;
}

.container-fluid {
	@include clearfix;
	padding-left: $containerPadding;
	padding-right: $containerPadding;
}

// Visibility utilities
// For desktops
.visible-phone     { display: none; }
.visible-tablet    { display: none; }
.visible-desktop   { display: block; }
.hidden-phone      { display: block; }
.hidden-tablet     { display: block; }
.hidden-desktop    { display: none; }

// Phones only
@media (max-width: 767px) {
  // Show
  .visible-phone     { display: block; }
  // Hide
  .hidden-phone      { display: none; }
  // Hide everything else
  .hidden-desktop    { display: block; }
  .visible-desktop   { display: none; }
}

// Tablets & small desktops only
@media (min-width: 768px) and (max-width: 979px) {
  // Show
  .visible-tablet    { display: block; }
  // Hide
  .hidden-tablet     { display: none; }
  // Hide everything else
  .hidden-desktop    { display: block; }
  .visible-desktop   { display: none; }
}


// Printer
@media print {
	.audio-bar, #uvTab {
		display: none !important;
	}
}




// Phone Landscape and below
@media (max-width: $mediaSmallLandscape) {	
	// Make all columns even
	.row-fluid > [class*="span"] {
		float: none;
		display: block;
		width: auto;
		margin: 0;
	}

	// Block level the page header small tag for readability
	.page-header h1 small {
		display: block;
		line-height: $baseLineHeight;
	}
	
	.show-segments .teaser .info {
		border-right: none !important;
		padding-right: 0;
	}
	
	.broadcastbar .show-time {
		display: none;
	}
}



// Between Tablet Portrait and Phone Landscape
@media (max-width: $mediaMidPortrait - 1) and (min-width: $mediaSmallLandscape + 1) {

}



// Below Portrait Tablet ("reader mode")
@media (max-width: $mediaMidPortrait - 1) {	
	.nav-primary {
		display: none;
	}
	
	#offscreen-header {
		display: none;
	}
	
	.nav-compact {
		display: block !important;
	}
	
	.filters {
		li.heading {
			display: none !important;
		}
		.active-arrow {
			display: none !important;
		}
	}
	
	.fold h6 {
		margin-top: 0 !important;
		text-align: left !important;
	}
	
	.comment-count {
		display: none;
	}
	
	.article-meta {
		display: none;
	}
	
	.footer-nav {
		.section {
			border-left: none !important;
		}
	}
	
	#sidebar, #sidebar-top, #sidebar-bottom {
		display: none;
	}
		
	#beta-bar {
		display: none;
	}
	
	#masthead {
		text-align: center;
		.pledge-container {
			display: none;
		}
	}
	
	#main {
		.homepage-top {
			border-bottom: none;
			margin-bottom: 0;
		}
		.more-content {
			@include horizontify;
		}
		
		.events-forum {
			border-left: none;
			padding-left: 0;
			.mq-row-fluid {
				@include makeFluidRow;
			}
		}
		
		.more-news-content {
			border-right: none;
			padding-right: none;
			margin-bottom: 5px;
		}
		
		.related-content {
			border-top: 1px solid $grayLighter;
			padding-top: 10px;
			@include centeredAsset;
			@include responsiveImageAsset($threeW);
		}
	}

	.broadcastbar .next-program {
		display: none;
	}
}




// Tablet Portrait And Above
@media (min-width: $mediaMidPortrait) {
	@include gridFluid($fluidGridColumnWidth, $fluidGridGutterWidth);
}




// Below Tablet Landscape
@media (max-width: $mediaMidLandscape - 1) {
	.nav-primary form {
		display: none;
	}
	
	.audio-bar, #uvTab {
		display: none !important; // temporary
	}
	
	#main {
		.more-news-container {
			border-right: none;
			padding-right: none;
			margin-bottom: 5px;
			.more-news {
				border-bottom: none;
			}
		}
		
		.homepage-top {
			border-bottom: none;
		}
		
		.homepage-top, .homepage-bottom {
			@include horizontify;
			
			#sidebar-top, #sidebar-bottom {
				.mq-row-fluid {
					@include makeFluidRow;
					border-top: 1px solid $grayLighter;
					padding-top:20px;
					
					&.advertisements {
						background: $grayBackground;
					}
				}
				.widget {
					border-bottom: none;
				}
			}
		}
		
		
	}
}



// Between Mid Portrait and Max
@media(max-width: $mediaMax - 1) and (min-width: $mediaMidPortrait) {
	#main {
		.homepage-default {
			@include horizontify;
			.offleads {
				@include makeFluidRow;
				.span4:last-child .offlead {
					border-right: none;
				}
				.offlead {
					padding-left: 5px;
					padding-right: 5px;
					border-right: 1px solid $grayLighter;
					border-bottom: none;
				}
			}
		}
	}
}



// Below Max Width (normal screen)
@media (max-width: $mediaMax - 1) {	
	.program-masthead .support {
		display: block !important;
		background: none !important;
		width: auto !important;
		height: auto !important;
		a {
			display: inline;
			color: $black !important;
			text-shadow: none !important;
		}
	}
	
	#main {
		.lead5 {
			@include centeredAsset;
			border-bottom: 1px solid $grayLighter;
			padding-bottom: 5px;
			margin-bottom: 5px;
		}
	}
}




// Max width (normal screen) and above
@media (min-width: $mediaMax) {
	.container-fluid {
		margin-left: auto;
		margin-right: auto;
		max-width: $gridRowWidth;
	}
}